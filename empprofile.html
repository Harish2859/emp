<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Employee Profile - Sarah Johnson</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        /* Enhanced sidebar styling with better spacing and professional design */
        .sidebar-layout {
            display: flex;
            min-height: 100vh;
        }
        
        .profile-sidebar {
            width: 380px;
            background: #3b82f6;
            position: fixed;
            height: 100vh;
            overflow-y: auto;
            z-index: 10;
            box-shadow: 4px 0 20px rgba(0, 0, 0, 0.1);
        }
        
        .main-content {
            margin-left: 380px;
            flex: 1;
            background: #f8fafc;
            min-height: 100vh;
            padding: 2rem;
        }
        
        .skill-bar {
            transition: width 0.3s ease-in-out;
        }
        
        .modal-overlay {
            backdrop-filter: blur(8px);
            animation: fadeIn 0.3s ease-out;
        }
        
        .modal-content {
            animation: slideUp 0.3s ease-out;
            transform-origin: center;
        }
        
        .input-field {
            transition: all 0.3s ease;
            border: 2px solid #e5e7eb;
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(10px);
        }
        
        .input-field:focus {
            border-color: #3b82f6;
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
            background: rgba(255, 255, 255, 1);
        }

        .skills-container {
            max-height: 300px;
            overflow-y: auto;
            scrollbar-width: thin;
            scrollbar-color: #cbd5e1 #f1f5f9;
        }
        
        .skills-container::-webkit-scrollbar {
            width: 6px;
        }
        
        .skills-container::-webkit-scrollbar-track {
            background: #f1f5f9;
            border-radius: 3px;
        }
        
        .skills-container::-webkit-scrollbar-thumb {
            background: #cbd5e1;
            border-radius: 3px;
        }

        /* Added timeline container scrollbar styling */
        .timeline-container::-webkit-scrollbar {
            width: 6px;
        }
        
        .timeline-container::-webkit-scrollbar-track {
            background: #f1f5f9;
            border-radius: 3px;
        }
        
        .timeline-container::-webkit-scrollbar-thumb {
            background: #cbd5e1;
            border-radius: 3px;
        }
        
        .add-skill-btn {
            transition: all 0.3s ease;
            transform: scale(1);
        }
        
        .add-skill-btn:hover {
            transform: scale(1.1);
            background-color: #3b82f6;
            color: white;
        }
        
        .delete-skill-btn {
            opacity: 0;
            transition: opacity 0.3s ease;
        }
        
        .delete-skill-btn:hover {
            opacity: 100;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        @keyframes slideUp {
            from { 
                opacity: 0;
                transform: translateY(30px) scale(0.95);
            }
            to { 
                opacity: 1;
                transform: translateY(0) scale(1);
            }
        }
        
        @keyframes slideInRight {
            from { 
                opacity: 0;
                transform: translateX(100%);
            }
            to { 
                opacity: 1;
                transform: translateX(0);
            }
        }
        
        .glass-card {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        /* Responsive design for mobile */
        @media (max-width: 768px) {
            .profile-sidebar {
                width: 100%;
                position: relative;
                height: auto;
            }
            
            .main-content {
                margin-left: 0;
                padding: 1rem;
            }
            
            .sidebar-layout {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>
    <div class="sidebar-layout">
        <!-- Profile Sidebar -->
        <div class="profile-sidebar text-white">
            <!-- Navigation Header -->
            <div class="p-4 border-b border-white border-opacity-20">
                <div class="flex space-x-2">
                    <button onclick="window.location.href='employee.html'" class="flex-1 bg-white bg-opacity-10 hover:bg-opacity-20 text-white px-4 py-2 rounded-lg font-medium transition-all duration-300 backdrop-blur-sm border border-white border-opacity-30">
                        <i class="fas fa-home mr-2"></i>Dashboard
                    </button>
                    <button onclick="window.location.href='empprofile.html'" class="flex-1 bg-white bg-opacity-20 text-white px-4 py-2 rounded-lg font-medium transition-all duration-300 backdrop-blur-sm border border-white border-opacity-50">
                        <i class="fas fa-user mr-2"></i>Profile
                    </button>
                </div>
            </div>
            
            <!-- Improved padding and spacing structure -->
            <div class="p-8">
                <!-- Profile Header -->
                <div class="text-center mb-8">
                  <div class="relative inline-block mb-6">
  <!-- Increased profile image size and improved styling -->
  <img id="profileImage" src="/placeholder.svg?height=160&width=160" 
       alt="Profile Picture" 
       class="w-40 h-40 rounded-full object-cover border-4 border-white shadow-2xl mx-auto">
  <button id="editButton" 
          class="absolute bottom-2 right-2 bg-white text-blue-500 p-3 rounded-full hover:bg-blue-50 transition-all duration-300 shadow-lg hover:shadow-xl transform hover:scale-105">
    <i class="fas fa-camera text-lg"></i>
  </button>
</div>

<!-- Hidden file input for selecting new profile pic -->
<input id="imageUpload" type="file" accept="image/*" style="display:none" />

<!-- Optional save button, hidden by default -->
<button id="saveButton" 
        style="display:none; margin-top:10px; padding: 8px 16px; background-color: #3b82f6; color: white; border: none; border-radius: 6px; cursor: pointer;">
  Save Profile Picture
</button>
                    
                    <!-- Enhanced typography hierarchy and spacing -->
                    <h1 class="text-3xl font-bold mb-2 tracking-wide" data-field="name">Sarah Johnson</h1>
                    <p class="text-xl text-blue-100 mb-1 font-medium" data-field="title">Senior Software Engineer</p>
                    <p class="text-lg text-blue-200 mb-4 opacity-90" data-field="department">Engineering Department</p>
                    
                    <!-- Improved edit button styling -->
                    <button onclick="openEditModal()" class="bg-white bg-opacity-20 hover:bg-opacity-30 text-white px-6 py-3 rounded-full font-semibold transition-all duration-300 backdrop-blur-sm border border-white border-opacity-30 hover:border-opacity-50 shadow-lg hover:shadow-xl transform hover:scale-105">
                        <i class="fas fa-edit mr-2"></i>Edit Profile
                    </button>
                </div>

                <!-- Enhanced employee details section with better spacing -->
                <div class="space-y-6 mb-8">
                    <div class="bg-white bg-opacity-10 rounded-xl p-5 backdrop-blur-sm border border-white border-opacity-20">
                        <h3 class="text-lg font-semibold mb-4 text-blue-100">Employee Details</h3>
                        <div class="space-y-3">
                            <div class="flex items-center text-blue-50">
                                <i class="fas fa-id-badge w-5 mr-3 text-blue-200"></i>
                                <span class="text-sm font-medium">ID:</span>
                                <span class="ml-2" data-field="employeeId">EMP-2024-001</span>
                            </div>
                            <div class="flex items-center text-blue-50">
                                <i class="fas fa-map-marker-alt w-5 mr-3 text-blue-200"></i>
                                <span class="text-sm font-medium">Location:</span>
                                <span class="ml-2" data-field="location">San Francisco, CA</span>
                            </div>
                            <div class="flex items-center text-blue-50">
                                <i class="fas fa-user w-5 mr-3 text-blue-200"></i>
                                <span class="text-sm font-medium">Pronouns:</span>
                                <span class="ml-2" data-field="pronouns">She/Her</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Enhanced contact information section -->
                <div class="space-y-6">
                    <div class="bg-white bg-opacity-10 rounded-xl p-5 backdrop-blur-sm border border-white border-opacity-20">
                        <h3 class="text-lg font-semibold mb-4 text-blue-100">Contact Information</h3>
                        <div class="space-y-4">
                            <div class="flex items-center text-blue-50 hover:text-white transition-colors">
                                <i class="fas fa-envelope w-5 mr-3 text-blue-200"></i>
                                <a href="mailto:sarah.johnson@company.com" class="hover:underline" data-field="email">sarah.johnson@company.com</a>
                            </div>
                            <div class="flex items-center text-blue-50 hover:text-white transition-colors">
                                <i class="fas fa-phone w-5 mr-3 text-blue-200"></i>
                                <a href="tel:+12345678900" class="hover:underline" data-field="phone">+1 (234) 567-8900</a>
                            </div>
                            <div class="flex items-center text-blue-50 hover:text-white transition-colors">
                                <i class="fab fa-linkedin w-5 mr-3 text-blue-200"></i>
                                <a href="https://linkedin.com/in/sarahjohnson" target="_blank" class="hover:underline" data-field="linkedin">linkedin.com/in/sarahjohnson</a>
                            </div>
                            <div class="flex items-center text-blue-50">
                                <i class="fab fa-slack w-5 mr-3 text-blue-200"></i>
                                <span data-field="slack">@sarah.johnson</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Main Content Area -->
        <div class="main-content">
            <!-- Professional Summary -->
            <div class="bg-white rounded-xl shadow-lg p-6 mb-8">
                <h2 class="text-2xl font-bold text-gray-800 mb-4">Professional Summary</h2>
                <p class="text-gray-700 leading-relaxed" data-field="summary">
                    Experienced software engineer with 8+ years of expertise in full-stack development, cloud architecture, and team leadership. 
                    Passionate about building scalable solutions and mentoring junior developers. Proven track record of delivering high-impact 
                    projects that drive business growth and improve user experience.
                </p>
            </div>

            <div class="grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8">
                <!-- Skills Section -->
                <div class="bg-white rounded-xl shadow-lg p-6">
                    <div class="flex items-center justify-between mb-6">
                        <h2 class="text-2xl font-bold text-gray-800">Skills & Expertise</h2>
                        <button id="addSkillBtn" class="add-skill-btn w-8 h-8 bg-gray-100 hover:bg-blue-500 hover:text-white rounded-full flex items-center justify-center transition-all duration-300">
                            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6V4m0 2a2 2 0 100 4m0-4a2 2 0 110 4m-6 8a2 2 0 100-4m0 4a2 2 0 100 4m0-4v2m0-6V4m6 6v10m6-2a2 2 0 100-4m0 4a2 2 0 100 4m0-4v2m0-6V4"></path>
                            </svg>
                        </button>
                    </div>
                    <div id="skillsContainer" class="skills-container space-y-4">
                        <!-- Skills will be dynamically populated here -->
                    </div>
                </div>

                <!-- Skills Chart -->
                <div class="bg-white rounded-xl shadow-lg p-6">
                    <h2 class="text-2xl font-bold text-gray-800 mb-6">Skills Overview</h2>
                    <div class="relative h-64">
                        <canvas id="skillsChart"></canvas>
                    </div>
                </div>
            </div>

            <!-- Career Timeline -->
            <div class="bg-white rounded-xl shadow-lg p-6 mb-8">
                <div class="flex items-center justify-between mb-6">
                    <h2 class="text-2xl font-bold text-gray-800">Career Timeline</h2>
                    <button id="addTimelineBtn" class="add-skill-btn w-8 h-8 bg-gray-100 hover:bg-blue-500 hover:text-white rounded-full flex items-center justify-center transition-all duration-300">
            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"></path>
            </svg>
        </button>
                </div>
                <div class="relative">
                    <div class="absolute left-4 top-0 bottom-0 w-0.5 bg-blue-200"></div>
                    <!-- Limited timeline container to show only top 3 items with scroll -->
                    <div id="timelineContainer" class="timeline-container space-y-6" style="max-height: 320px; overflow-y: auto; scrollbar-width: thin; scrollbar-color: #cbd5e1 #f1f5f9;">
                        <!-- Timeline entries will be dynamically populated here -->
                    </div>
                </div>
            </div>

            <div class="grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8">
                <!-- Certifications -->
                <div class="bg-white rounded-xl shadow-lg p-6">
                    <div class="flex items-center justify-between mb-6">
                        <h2 class="text-2xl font-bold text-gray-800">Certifications</h2>
                        <button id="addCertificationBtn" class="add-skill-btn w-8 h-8 bg-gray-100 hover:bg-blue-500 hover:text-white rounded-full flex items-center justify-center transition-all duration-300">
                            <!-- replaced plus icon with certificate SVG icon -->
                            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4M7.835 4.697a3.42 3.42 0 001.946-.806 3.42 3.42 0 014.438 0 3.42 3.42 0 001.946.806 3.42 3.42 0 013.138 3.138 3.42 3.42 0 00.806 1.946 3.42 3.42 0 010 4.438 3.42 3.42 0 00-.806 1.946 3.42 3.42 0 01-3.138 3.138 3.42 3.42 0 00-1.946.806 3.42 3.42 0 01-4.438 0 3.42 3.42 0 00-1.946-.806 3.42 3.42 0 01-3.138-3.138 3.42 3.42 0 00-.806-1.946 3.42 3.42 0 010-4.438 3.42 3.42 0 00.806-1.946 3.42 3.42 0 013.138-3.138z"></path>
                            </svg>
                        </button>
                    </div>
                    <div id="certificationsContainer" class="space-y-4" style="max-height: 300px; overflow-y: auto;">
                        <!-- Certifications will be dynamically populated here -->
                    </div>
                </div>

                <!-- Current Projects -->
                <div class="bg-white rounded-xl shadow-lg p-6">
                    <div class="flex items-center justify-between mb-6">
                        <h2 class="text-2xl font-bold text-gray-800">Current Projects</h2>
                        <button id="addProjectBtn" class="add-skill-btn w-8 h-8 bg-gray-100 hover:bg-blue-500 hover:text-white rounded-full flex items-center justify-center transition-all duration-300">
                            <!-- replaced plus icon with project/folder SVG icon -->
                            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"></path>
                            </svg>
                        </button>
                    </div>
                    <div id="projectsContainer" class="space-y-4" style="max-height: 300px; overflow-y: auto;">
                        <!-- Projects will be dynamically populated here -->
                    </div>
                </div>
            </div>

            <!-- Personal Touch -->
            <div class="bg-white rounded-xl shadow-lg p-6">
                <h2 class="text-2xl font-bold text-gray-800 mb-6">Personal Touch</h2>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                    <div class="text-center">
                        <i class="fas fa-mountain text-3xl text-blue-500 mb-2"></i>
                        <h3 class="font-semibold mb-1">Hobbies</h3>
                        <p class="text-sm text-gray-600" data-field="hobbies">Rock climbing, Photography, Cooking</p>
                    </div>
                    <div class="text-center">
                        <i class="fas fa-quote-left text-3xl text-green-500 mb-2"></i>
                        <h3 class="font-semibold mb-1">Favorite Quote</h3>
                        <p class="text-sm text-gray-600 italic" data-field="quote">"Code is poetry written in logic"</p>
                    </div>
                    <div class="text-center">
                        <i class="fas fa-coffee text-3xl text-orange-500 mb-2"></i>
                        <h3 class="font-semibold mb-1">Fun Fact</h3>
                        <p class="text-sm text-gray-600" data-field="funFact">Can solve a Rubik's cube in under 2 minutes</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- All modals remain the same but updated for new layout -->
    <!-- Edit Profile Modal -->
    <div id="editModal" class="fixed inset-0 bg-black bg-opacity-50 modal-overlay hidden z-50 flex items-center justify-center p-4">
        <div class="glass-card modal-content rounded-2xl shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto">
            <div class="p-8">
                <div class="flex items-center justify-between mb-6">
                    <h2 class="text-2xl font-bold text-gray-800">Edit Profile</h2>
                    <button id="closeModal" class="p-2 hover:bg-gray-100 rounded-full transition-colors">
                        <i class="fas fa-times text-gray-500"></i>
                    </button>
                </div>
                
                <form id="editForm" class="space-y-8">
                    <!-- Professional Summary section -->
                    <div class="bg-gray-50 p-6 rounded-lg">
                        <h3 class="text-lg font-semibold text-gray-800 mb-4">Professional Summary</h3>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Summary</label>
                            <textarea id="edit-summary" rows="4" class="input-field w-full px-4 py-3 rounded-lg resize-none" placeholder="Enter your professional summary..."></textarea>
                        </div>
                    </div>

                    <!-- Basic Information -->
                    <div class="bg-gray-50 p-6 rounded-lg">
                        <h3 class="text-lg font-semibold text-gray-800 mb-4">Basic Information</h3>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Full Name</label>
                                <input type="text" id="edit-name" class="input-field w-full px-4 py-3 rounded-lg" placeholder="Enter full name">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Job Title</label>
                                <input type="text" id="edit-title" class="input-field w-full px-4 py-3 rounded-lg" placeholder="Enter job title">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Department</label>
                                <input type="text" id="edit-department" class="input-field w-full px-4 py-3 rounded-lg" placeholder="Enter department">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Employee ID</label>
                                <input type="text" id="edit-employeeId" class="input-field w-full px-4 py-3 rounded-lg" placeholder="Enter employee ID">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Location</label>
                                <input type="text" id="edit-location" class="input-field w-full px-4 py-3 rounded-lg" placeholder="Enter location">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Pronouns</label>
                                <input type="text" id="edit-pronouns" class="input-field w-full px-4 py-3 rounded-lg" placeholder="Enter pronouns">
                            </div>
                        </div>
                    </div>

                    <!-- Contact Information -->
                    <div class="bg-gray-50 p-6 rounded-lg">
                        <h3 class="text-lg font-semibold text-gray-800 mb-4">Contact Information</h3>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Email</label>
                                <input type="email" id="edit-email" class="input-field w-full px-4 py-3 rounded-lg" placeholder="Enter email">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Phone</label>
                                <input type="tel" id="edit-phone" class="input-field w-full px-4 py-3 rounded-lg" placeholder="Enter phone">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">LinkedIn</label>
                                <input type="text" id="edit-linkedin" class="input-field w-full px-4 py-3 rounded-lg" placeholder="Enter LinkedIn profile">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Slack Handle</label>
                                <input type="text" id="edit-slack" class="input-field w-full px-4 py-3 rounded-lg" placeholder="Enter Slack handle">
                            </div>
                        </div>
                    </div>

                    <!-- Personal Touch section -->
                    <div class="bg-gray-50 p-6 rounded-lg">
                        <h3 class="text-lg font-semibold text-gray-800 mb-4">Personal Touch</h3>
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Hobbies</label>
                                <input type="text" id="edit-hobbies" class="input-field w-full px-4 py-3 rounded-lg" placeholder="Enter your hobbies">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Favorite Quote</label>
                                <input type="text" id="edit-quote" class="input-field w-full px-4 py-3 rounded-lg" placeholder="Enter your favorite quote">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Fun Fact</label>
                                <input type="text" id="edit-funFact" class="input-field w-full px-4 py-3 rounded-lg" placeholder="Enter a fun fact about yourself">
                            </div>
                        </div>
                    </div>
                    
                    <div class="flex justify-end space-x-4 pt-6 border-t">
                        <button type="button" id="cancelEdit" class="px-6 py-3 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors font-medium">
                            Cancel
                        </button>
                        <button type="submit" class="px-6 py-3 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors font-medium">
                            Save Changes
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Add Skills Modal -->
    <div id="addSkillModal" class="fixed inset-0 bg-black bg-opacity-50 modal-overlay hidden z-50 flex items-center justify-center p-4">
        <div class="glass-card modal-content rounded-2xl shadow-2xl max-w-md w-full">
            <div class="p-6">
                <div class="flex items-center justify-between mb-6">
                    <h2 class="text-xl font-bold text-gray-800">Add New Skill</h2>
                    <button id="closeSkillModal" class="p-2 hover:bg-gray-100 rounded-full transition-colors">
                        <i class="fas fa-times text-gray-500"></i>
                    </button>
                </div>
                
                <form id="addSkillForm" class="space-y-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Skill Name</label>
                        <input type="text" id="skillName" class="input-field w-full px-4 py-3 rounded-lg" placeholder="e.g., Python, Machine Learning, Project Management" required>
                    </div>
                    
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Proficiency Level (%)</label>
                        <div class="flex items-center gap-4">
                            <input type="range" id="skillLevel" min="0" max="100" value="50" class="flex-1 h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer">
                            <span id="skillLevelDisplay" class="text-lg font-semibold text-blue-600 min-w-[3rem]">50%</span>
                        </div>
                    </div>
                    
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Color Theme</label>
                        <div class="flex gap-2">
                            <button type="button" class="color-option w-8 h-8 bg-blue-500 rounded-full border-2 border-transparent hover:border-gray-400 transition-colors" data-color="bg-blue-500"></button>
                            <button type="button" class="color-option w-8 h-8 bg-green-500 rounded-full border-2 border-transparent hover:border-gray-400 transition-colors" data-color="bg-green-500"></button>
                            <button type="button" class="color-option w-8 h-8 bg-purple-500 rounded-full border-2 border-transparent hover:border-gray-400 transition-colors" data-color="bg-purple-500"></button>
                            <button type="button" class="color-option w-8 h-8 bg-orange-500 rounded-full border-2 border-transparent hover:border-gray-400 transition-colors" data-color="bg-orange-500"></button>
                            <button type="button" class="color-option w-8 h-8 bg-red-500 rounded-full border-2 border-transparent hover:border-gray-400 transition-colors" data-color="bg-red-500"></button>
                            <button type="button" class="color-option w-8 h-8 bg-indigo-500 rounded-full border-2 border-transparent hover:border-gray-400 transition-colors" data-color="bg-indigo-500"></button>
                        </div>
                    </div>
                    
                    <div class="flex justify-end space-x-3 pt-4 border-t">
                        <button type="button" id="cancelSkill" class="px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors font-medium">
                            Cancel
                        </button>
                        <button type="submit" class="px-6 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors font-medium">
                            <i class="fas fa-save mr-2"></i>Save Skill
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Added timeline modal after skills modal -->
    <!-- Add Timeline Modal -->
    <div id="addTimelineModal" class="fixed inset-0 bg-black bg-opacity-50 modal-overlay hidden z-50 flex items-center justify-center p-4">
        <div class="glass-card modal-content rounded-2xl shadow-2xl max-w-lg w-full">
            <div class="p-6">
                <div class="flex items-center justify-between mb-6">
                    <h2 class="text-xl font-bold text-gray-800">Add Timeline Entry</h2>
                    <button id="closeTimelineModal" class="p-2 hover:bg-gray-100 rounded-full transition-colors">
                        <i class="fas fa-times text-gray-500"></i>
                    </button>
                </div>
            
                <form id="addTimelineForm" class="space-y-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Position Title</label>
                        <input type="text" id="timelinePosition" class="input-field w-full px-4 py-3 rounded-lg" placeholder="e.g., Senior Software Engineer" required>
                    </div>
                
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Company/Organization</label>
                        <input type="text" id="timelineCompany" class="input-field w-full px-4 py-3 rounded-lg" placeholder="e.g., TechCorp Inc." required>
                    </div>
                
                    <div class="grid grid-cols-2 gap-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Start Date</label>
                            <input type="text" id="timelineStartDate" class="input-field w-full px-4 py-3 rounded-lg" placeholder="e.g., 2022" required>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">End Date</label>
                            <input type="text" id="timelineEndDate" class="input-field w-full px-4 py-3 rounded-lg" placeholder="e.g., Present">
                        </div>
                    </div>
                
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Description</label>
                        <textarea id="timelineDescription" rows="3" class="input-field w-full px-4 py-3 rounded-lg resize-none" placeholder="Brief description of your role and achievements..." required></textarea>
                    </div>
                
                    <div class="flex items-center">
                        <input type="checkbox" id="timelineCurrent" class="mr-2 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded">
                        <label for="timelineCurrent" class="text-sm text-gray-700">This is my current position</label>
                    </div>
                
                    <div class="flex justify-end space-x-3 pt-4 border-t">
                        <button type="button" id="cancelTimeline" class="px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors font-medium">
                            Cancel
                        </button>
                        <button type="submit" class="px-6 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors font-medium">
                            <i class="fas fa-save mr-2"></i>Save Entry
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Add Certification Modal -->
    <div id="addCertificationModal" class="fixed inset-0 bg-black bg-opacity-50 modal-overlay hidden z-50 flex items-center justify-center p-4">
        <div class="glass-card modal-content rounded-2xl shadow-2xl max-w-md w-full">
            <div class="p-6">
                <div class="flex items-center justify-between mb-6">
                    <h2 class="text-xl font-bold text-gray-800">Add New Certification</h2>
                    <button id="closeCertificationModal" class="p-2 hover:bg-gray-100 rounded-full transition-colors">
                        <i class="fas fa-times text-gray-500"></i>
                    </button>
                </div>
                
                <form id="addCertificationForm" class="space-y-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Certification Name</label>
                        <input type="text" id="certificationName" class="input-field w-full px-4 py-3 rounded-lg" placeholder="e.g., AWS Solutions Architect" required>
                    </div>
                    
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Description</label>
                        <input type="text" id="certificationDescription" class="input-field w-full px-4 py-3 rounded-lg" placeholder="e.g., Professional level certification" required>
                    </div>
                    
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Icon</label>
                        <div class="flex gap-2 flex-wrap">
                            <button type="button" class="icon-option p-2 border-2 border-transparent hover:border-gray-400 rounded-lg transition-colors" data-icon="fas fa-certificate" data-color="blue">
                                <i class="fas fa-certificate text-blue-600 text-xl"></i>
                            </button>
                            <button type="button" class="icon-option p-2 border-2 border-transparent hover:border-gray-400 rounded-lg transition-colors" data-icon="fas fa-cloud" data-color="orange">
                                <i class="fas fa-cloud text-orange-600 text-xl"></i>
                            </button>
                            <button type="button" class="icon-option p-2 border-2 border-transparent hover:border-gray-400 rounded-lg transition-colors" data-icon="fas fa-code" data-color="green">
                                <i class="fas fa-code text-green-600 text-xl"></i>
                            </button>
                            <button type="button" class="icon-option p-2 border-2 border-transparent hover:border-gray-400 rounded-lg transition-colors" data-icon="fas fa-shield-alt" data-color="red">
                                <i class="fas fa-shield-alt text-red-600 text-xl"></i>
                            </button>
                            <button type="button" class="icon-option p-2 border-2 border-transparent hover:border-gray-400 rounded-lg transition-colors" data-icon="fas fa-database" data-color="purple">
                                <i class="fas fa-database text-purple-600 text-xl"></i>
                            </button>
                            <button type="button" class="icon-option p-2 border-2 border-transparent hover:border-gray-400 rounded-lg transition-colors" data-icon="fas fa-mobile-alt" data-color="indigo">
                                <i class="fas fa-mobile-alt text-indigo-600 text-xl"></i>
                            </button>
                        </div>
                    </div>
                    
                    <div class="flex justify-end space-x-3 pt-4 border-t">
                        <button type="button" id="cancelCertification" class="px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors font-medium">
                            Cancel
                        </button>
                        <button type="submit" class="px-6 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors font-medium">
                            <i class="fas fa-save mr-2"></i>Save Certification
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Add Project Modal -->
    <div id="addProjectModal" class="fixed inset-0 bg-black bg-opacity-50 modal-overlay hidden z-50 flex items-center justify-center p-4">
        <div class="glass-card modal-content rounded-2xl shadow-2xl max-w-lg w-full">
            <div class="p-6">
                <div class="flex items-center justify-between mb-6">
                    <h2 class="text-xl font-bold text-gray-800">Add New Project</h2>
                    <button id="closeProjectModal" class="p-2 hover:bg-gray-100 rounded-full transition-colors">
                        <i class="fas fa-times text-gray-500"></i>
                    </button>
                </div>
                
                <form id="addProjectForm" class="space-y-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Project Name</label>
                        <input type="text" id="projectName" class="input-field w-full px-4 py-3 rounded-lg" placeholder="e.g., E-commerce Platform" required>
                    </div>
                    
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Description</label>
                        <textarea id="projectDescription" rows="3" class="input-field w-full px-4 py-3 rounded-lg resize-none" placeholder="Brief description of the project..." required></textarea>
                    </div>
                    
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Progress (%)</label>
                        <div class="flex items-center gap-4">
                            <input type="range" id="projectProgress" min="0" max="100" value="0" class="flex-1 h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer">
                            <span id="projectProgressDisplay" class="text-lg font-semibold text-blue-600 min-w-[3rem]">0%</span>
                        </div>
                    </div>
                    
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Status</label>
                        <select id="projectStatus" class="input-field w-full px-4 py-3 rounded-lg" required>
                            <option value="Planning">Planning</option>
                            <option value="In Progress" selected>In Progress</option>
                            <option value="On Track">On Track</option>
                            <option value="At Risk">At Risk</option>
                            <option value="Completed">Completed</option>
                        </select>
                    </div>
                    
                    <div class="flex items-center">
                        <input type="checkbox" id="projectCurrent" class="mr-2 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded" checked>
                        <label for="projectCurrent" class="text-sm text-gray-700">This is a current active project</label>
                    </div>
                    
                    <div class="flex justify-end space-x-3 pt-4 border-t">
                        <button type="button" id="cancelProject" class="px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors font-medium">
                            Cancel
                        </button>
                        <button type="submit" class="px-6 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors font-medium">
                            <i class="fas fa-save mr-2"></i>Save Project
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <script>
        
        // Sample data arrays
        let skillsData = [
            { name: 'JavaScript', level: 90, color: 'bg-blue-500' },
            { name: 'React', level: 85, color: 'bg-green-500' },
            { name: 'Node.js', level: 80, color: 'bg-yellow-500' },
            { name: 'Python', level: 75, color: 'bg-purple-500' }
        ];

        let timelineData = [
            {
                position: 'Senior Software Engineer',
                company: 'Tech Corp',
                startDate: '2022',
                endDate: 'Present',
                description: 'Leading development of web applications using React and Node.js',
                current: true
            },
            {
                position: 'Software Engineer',
                company: 'StartupXYZ',
                startDate: '2020',
                endDate: '2022',
                description: 'Developed full-stack applications and improved system performance',
                current: false
            }
        ];

        let certificationsData = [
            { name: 'AWS Certified Developer', description: 'Amazon Web Services certification for cloud development', icon: 'fas fa-cloud', color: 'orange' },
            { name: 'React Professional', description: 'Advanced React development certification', icon: 'fab fa-react', color: 'blue' }
        ];

        let projectsData = [
            { name: 'E-commerce Platform', description: 'Building a modern e-commerce solution', progress: 75, status: 'In Progress', current: true },
            { name: 'Mobile App', description: 'React Native mobile application', progress: 90, status: 'Testing', current: true }
        ];

        // Default profile data
        let profileData = {
            name: 'Sarah Johnson',
            title: 'Senior Software Engineer',
            department: 'Engineering Department',
            employeeId: 'EMP-2024-001',
            location: 'San Francisco, CA',
            pronouns: 'She/Her',
            email: 'sarah.johnson@company.com',
            phone: '+1 (234) 567-8900',
            linkedin: 'linkedin.com/in/sarahjohnson',
            slack: '@sarah.johnson',
            summary: 'Experienced software engineer with 8+ years of expertise in full-stack development, cloud architecture, and team leadership. Passionate about building scalable solutions and mentoring junior developers. Proven track record of delivering high-impact projects that drive business growth and improve user experience.',
            hobbies: 'Rock climbing, Photography, Cooking',
            quote: '"Code is poetry written in logic"',
            funFact: 'Can solve a Rubik\'s cube in under 2 minutes'
        };

        let selectedColor = 'bg-blue-500';
        let selectedIcon = 'fas fa-certificate';
        let selectedIconColor = 'blue';

        // LocalStorage functions for data persistence
        function saveToLocalStorage() {
            localStorage.setItem('employeeProfileData', JSON.stringify(profileData));
            localStorage.setItem('employeeSkillsData', JSON.stringify(skillsData));
            localStorage.setItem('employeeTimelineData', JSON.stringify(timelineData));
            localStorage.setItem('employeeCertificationsData', JSON.stringify(certificationsData));
            localStorage.setItem('employeeProjectsData', JSON.stringify(projectsData));
        }

        function loadFromLocalStorage() {
    const savedProfile = localStorage.getItem('employeeProfileData');
    const savedSkills = localStorage.getItem('employeeSkillsData');
    const savedTimeline = localStorage.getItem('employeeTimelineData');
    const savedCertifications = localStorage.getItem('employeeCertificationsData');
    const savedProjects = localStorage.getItem('employeeProjectsData');
    const savedProfileImage = localStorage.getItem('employeeProfileImage');

    if (savedProfile) {
        profileData = JSON.parse(savedProfile);
    }
    if (savedSkills) {
        skillsData = JSON.parse(savedSkills);
    }
    if (savedTimeline) {
        timelineData = JSON.parse(savedTimeline);
    }
    if (savedCertifications) {
        certificationsData = JSON.parse(savedCertifications);
    }
    if (savedProjects) {
        projectsData = JSON.parse(savedProjects);
    }
    
    // Load profile image if available
    if (savedProfileImage) {
        const profileImage = document.getElementById('profileImage');
        if (profileImage) {
            profileImage.src = savedProfileImage;
            profileImage.onerror = () => {
                // Fallback to placeholder if image fails to load
                profileImage.src = "/placeholder.svg?height=160&width=160";
            };
        }
    }
}

        function updateProfileDisplay() {
            // Update all profile fields on the page
            const fields = ['name', 'title', 'department', 'employeeId', 'location', 'pronouns', 'email', 'phone', 'linkedin', 'slack', 'summary', 'hobbies', 'quote', 'funFact'];
            
            fields.forEach(field => {
                const elements = document.querySelectorAll(`[data-field="${field}"]`);
                elements.forEach(element => {
                    if (profileData[field]) {
                        element.textContent = profileData[field];
                    }
                });
            });
        }

        function openEditModal() {
            document.getElementById('editModal').classList.remove('hidden');
            populateEditForm();
        }

        document.addEventListener('DOMContentLoaded', function() {
            // Load data from localStorage first
            loadFromLocalStorage();
            
            // Update the display with loaded data
            updateProfileDisplay();
            
            renderSkills();
            renderTimeline();
            renderCertifications();
            renderProjects();
            initializeChart();
            
            // Listen for localStorage changes from other tabs/windows
window.addEventListener('storage', function(e) {
    if (e.key && e.key.startsWith('employee')) {
        console.log('Profile data updated, refreshing display...');
        loadFromLocalStorage();
        updateProfileDisplay();
        renderSkills();
        renderTimeline();
        renderCertifications();
        renderProjects();
        updateChart();
        
        // Handle profile image updates specifically
        if (e.key === 'employeeProfileImage') {
            const profileImage = document.getElementById('profileImage');
            if (profileImage && e.newValue) {
                profileImage.src = e.newValue;
            }
        }
    }
});

            const closeModalBtn = document.getElementById('closeModal');
            if (closeModalBtn) {
                closeModalBtn.addEventListener('click', function() {
                    document.getElementById('editModal').classList.add('hidden');
                });
            }

            const cancelEditBtn = document.getElementById('cancelEdit');
            if (cancelEditBtn) {
                cancelEditBtn.addEventListener('click', function() {
                    document.getElementById('editModal').classList.add('hidden');
                });
            }

            const editForm = document.getElementById('editForm');
            if (editForm) {
                editForm.addEventListener('submit', function(e) {
                    e.preventDefault();
                    updateProfile();
                    document.getElementById('editModal').classList.add('hidden');
                });
            }

            const addSkillBtn = document.getElementById('addSkillBtn');
            if (addSkillBtn) {
                addSkillBtn.addEventListener('click', function() {
                    const modal = document.getElementById('addSkillModal');
                    if (modal) {
                        modal.classList.remove('hidden');
                        const skillNameInput = document.getElementById('skillName');
                        if (skillNameInput) skillNameInput.focus();
                    }
                });
            }

            const addTimelineBtn = document.getElementById('addTimelineBtn');
            if (addTimelineBtn) {
                addTimelineBtn.addEventListener('click', function() {
                    const modal = document.getElementById('addTimelineModal');
                    if (modal) {
                        modal.classList.remove('hidden');
                        const positionInput = document.getElementById('timelinePosition');
                        if (positionInput) positionInput.focus();
                    }
                });
            }

            const addCertificationBtn = document.getElementById('addCertificationBtn');
            if (addCertificationBtn) {
                addCertificationBtn.addEventListener('click', function() {
                    const modal = document.getElementById('addCertificationModal');
                    if (modal) {
                        modal.classList.remove('hidden');
                        const certNameInput = document.getElementById('certificationName');
                        if (certNameInput) certNameInput.focus();
                    }
                });
            }

            const addProjectBtn = document.getElementById('addProjectBtn');
            if (addProjectBtn) {
                addProjectBtn.addEventListener('click', function() {
                    const modal = document.getElementById('addProjectModal');
                    if (modal) {
                        modal.classList.remove('hidden');
                        const projectNameInput = document.getElementById('projectName');
                        if (projectNameInput) projectNameInput.focus();
                    }
                });
            }

            setupModalCloseHandlers();
            setupFormHandlers();
        });

        function setupModalCloseHandlers() {
            // Skills modal
            const closeSkillModal = document.getElementById('closeSkillModal');
            if (closeSkillModal) {
                closeSkillModal.addEventListener('click', function() {
                    document.getElementById('addSkillModal').classList.add('hidden');
                    resetSkillForm();
                });
            }

            const cancelSkill = document.getElementById('cancelSkill');
            if (cancelSkill) {
                cancelSkill.addEventListener('click', function() {
                    document.getElementById('addSkillModal').classList.add('hidden');
                    resetSkillForm();
                });
            }

            // Timeline modal
            const closeTimelineModal = document.getElementById('closeTimelineModal');
            if (closeTimelineModal) {
                closeTimelineModal.addEventListener('click', function() {
                    document.getElementById('addTimelineModal').classList.add('hidden');
                    resetTimelineForm();
                });
            }

            const cancelTimeline = document.getElementById('cancelTimeline');
            if (cancelTimeline) {
                cancelTimeline.addEventListener('click', function() {
                    document.getElementById('addTimelineModal').classList.add('hidden');
                    resetTimelineForm();
                });
            }

            // Certification modal
            const closeCertificationModal = document.getElementById('closeCertificationModal');
            if (closeCertificationModal) {
                closeCertificationModal.addEventListener('click', function() {
                    document.getElementById('addCertificationModal').classList.add('hidden');
                    resetCertificationForm();
                });
            }

            const cancelCertification = document.getElementById('cancelCertification');
            if (cancelCertification) {
                cancelCertification.addEventListener('click', function() {
                    document.getElementById('addCertificationModal').classList.add('hidden');
                    resetCertificationForm();
                });
            }

            // Project modal
            const closeProjectModal = document.getElementById('closeProjectModal');
            if (closeProjectModal) {
                closeProjectModal.addEventListener('click', function() {
                    document.getElementById('addProjectModal').classList.add('hidden');
                    resetProjectForm();
                });
            }

            const cancelProject = document.getElementById('cancelProject');
            if (cancelProject) {
                cancelProject.addEventListener('click', function() {
                    document.getElementById('addProjectModal').classList.add('hidden');
                    resetProjectForm();
                });
            }
        }

        function setupFormHandlers() {
            // Skill level slider
            const skillLevel = document.getElementById('skillLevel');
            if (skillLevel) {
                skillLevel.addEventListener('input', function() {
                    const display = document.getElementById('skillLevelDisplay');
                    if (display) display.textContent = this.value + '%';
                });
            }

            // Project progress slider
            const projectProgress = document.getElementById('projectProgress');
            if (projectProgress) {
                projectProgress.addEventListener('input', function() {
                    const display = document.getElementById('projectProgressDisplay');
                    if (display) display.textContent = this.value + '%';
                });
            }

            // Color selection for skills
            document.querySelectorAll('.color-option').forEach(button => {
                button.addEventListener('click', function() {
                    document.querySelectorAll('.color-option').forEach(btn => btn.classList.remove('border-gray-800'));
                    this.classList.add('border-gray-800');
                    selectedColor = this.dataset.color;
                });
            });

            // Icon selection for certifications
            document.querySelectorAll('.icon-option').forEach(button => {
                button.addEventListener('click', function() {
                    document.querySelectorAll('.icon-option').forEach(btn => btn.classList.remove('border-gray-800'));
                    this.classList.add('border-gray-800');
                    selectedIcon = this.dataset.icon;
                    selectedIconColor = this.dataset.color;
                });
            });

            // Form submissions
            const addSkillForm = document.getElementById('addSkillForm');
            if (addSkillForm) {
                addSkillForm.addEventListener('submit', function(e) {
                    e.preventDefault();
                    
                    const skillName = document.getElementById('skillName').value.trim();
                    const skillLevel = parseInt(document.getElementById('skillLevel').value);
                    
                    if (skillName) {
                        skillsData.push({
                            name: skillName,
                            level: skillLevel,
                            color: selectedColor
                        });
                        
                        renderSkills();
                        updateChart();
                        saveToLocalStorage(); // Save to localStorage
                        
                        document.getElementById('addSkillModal').classList.add('hidden');
                        resetSkillForm();
                        showNotification('Skill added successfully!', 'success');
                    }
                });
            }

            const addTimelineForm = document.getElementById('addTimelineForm');
            if (addTimelineForm) {
                addTimelineForm.addEventListener('submit', function(e) {
                    e.preventDefault();
                    
                    const position = document.getElementById('timelinePosition').value.trim();
                    const company = document.getElementById('timelineCompany').value.trim();
                    const startDate = document.getElementById('timelineStartDate').value.trim();
                    const endDate = document.getElementById('timelineEndDate').value.trim() || 'Present';
                    const description = document.getElementById('timelineDescription').value.trim();
                    const current = document.getElementById('timelineCurrent').checked;
                    
                    if (position && company && startDate && description) {
                        timelineData.unshift({
                            position: position,
                            company: company,
                            startDate: startDate,
                            endDate: endDate,
                            description: description,
                            current: current
                        });
                        
                        renderTimeline();
                        saveToLocalStorage(); // Save to localStorage
                        
                        document.getElementById('addTimelineModal').classList.add('hidden');
                        resetTimelineForm();
                        showNotification('Timeline entry added successfully!', 'success');
                    }
                });
            }

            const addCertificationForm = document.getElementById('addCertificationForm');
            if (addCertificationForm) {
                addCertificationForm.addEventListener('submit', function(e) {
                    e.preventDefault();
                    
                    const name = document.getElementById('certificationName').value.trim();
                    const description = document.getElementById('certificationDescription').value.trim();
                    
                    if (name && description) {
                        certificationsData.push({
                            name: name,
                            description: description,
                            icon: selectedIcon,
                            color: selectedIconColor
                        });
                        
                        renderCertifications();
                        saveToLocalStorage(); // Save to localStorage
                        document.getElementById('addCertificationModal').classList.add('hidden');
                        resetCertificationForm();
                        showNotification('Certification added successfully!', 'success');
                    }
                });
            }

            const addProjectForm = document.getElementById('addProjectForm');
            if (addProjectForm) {
                addProjectForm.addEventListener('submit', function(e) {
                    e.preventDefault();
                    
                    const name = document.getElementById('projectName').value.trim();
                    const description = document.getElementById('projectDescription').value.trim();
                    const progress = parseInt(document.getElementById('projectProgress').value);
                    const status = document.getElementById('projectStatus').value;
                    const current = document.getElementById('projectCurrent').checked;
                    
                    if (name && description) {
                        projectsData.push({
                            name: name,
                            description: description,
                            progress: progress,
                            status: status,
                            current: current
                        });
                        
                        renderProjects();
                        saveToLocalStorage(); // Save to localStorage
                        document.getElementById('addProjectModal').classList.add('hidden');
                        resetProjectForm();
                        showNotification('Project added successfully!', 'success');
                    }
                });
            }
        }

        function populateEditForm() {
            const fields = ['name', 'title', 'department', 'employeeId', 'location', 'pronouns', 'email', 'phone', 'linkedin', 'slack', 'summary', 'hobbies', 'quote', 'funFact'];
            
            fields.forEach(field => {
                const targetElement = document.getElementById(`edit-${field}`);
                if (targetElement && profileData[field]) {
                    targetElement.value = profileData[field];
                }
            });
        }

        function updateProfile() {
            const fields = ['name', 'title', 'department', 'employeeId', 'location', 'pronouns', 'email', 'phone', 'linkedin', 'slack', 'summary', 'hobbies', 'quote', 'funFact'];
            
            fields.forEach(field => {
                const sourceElement = document.getElementById(`edit-${field}`);
                const targetElement = document.querySelector(`[data-field="${field}"]`);
                if (sourceElement && targetElement) {
                    const value = sourceElement.value;
                    targetElement.textContent = value;
                    profileData[field] = value; // Update the profile data object
                }
            });
            
            // Save to localStorage
            saveToLocalStorage();
            
            // Show success notification
            showNotification('Profile updated successfully!', 'success');
        }

        function renderSkills() {
            const container = document.getElementById('skillsContainer');
            if (!container) return;
            
            container.innerHTML = skillsData.map((skill, index) => `
                <div class="flex items-center justify-between p-3 bg-gray-50 rounded-lg">
                    <div class="flex-1">
                        <div class="flex items-center justify-between mb-2">
                            <span class="font-medium text-gray-800">${skill.name}</span>
                            <span class="text-sm text-gray-600">${skill.level}%</span>
                        </div>
                        <div class="w-full bg-gray-200 rounded-full h-2">
                            <div class="${skill.color} h-2 rounded-full transition-all duration-300" style="width: ${skill.level}%"></div>
                        </div>
                    </div>
                    <button onclick="deleteSkill(${index})" class="ml-3 text-red-500 hover:text-red-700 transition-colors">
                        <i class="fas fa-trash text-sm"></i>
                    </button>
                </div>
            `).join('');
        }

        function renderTimeline() {
            const container = document.getElementById('timelineContainer');
            if (!container) return;
            
            container.innerHTML = timelineData.map((entry, index) => `
                <div class="relative pl-8">
                    <div class="absolute left-0 w-8 h-8 ${entry.current ? 'bg-blue-500' : 'bg-gray-400'} rounded-full flex items-center justify-center">
                        <i class="fas fa-briefcase text-white text-xs"></i>
                    </div>
                    <div class="bg-gray-50 rounded-lg p-4">
                        <div class="flex items-start justify-between">
                            <div class="flex-1">
                                <h3 class="font-semibold text-gray-800">${entry.position}</h3>
                                <p class="text-blue-600 font-medium">${entry.company}</p>
                                <p class="text-sm text-gray-600 mb-2">${entry.startDate} - ${entry.endDate}</p>
                                <p class="text-gray-700">${entry.description}</p>
                            </div>
                            <button onclick="deleteTimelineEntry(${index})" class="text-red-500 hover:text-red-700 transition-colors ml-2">
                                <i class="fas fa-trash text-sm"></i>
                            </button>
                        </div>
                    </div>
                </div>
            `).join('');
        }

        function renderCertifications() {
            const container = document.getElementById('certificationsContainer');
            if (!container) return;
            
            container.innerHTML = certificationsData.map((cert, index) => `
                <div class="flex items-start space-x-3 p-3 bg-gray-50 rounded-lg">
                    <div class="text-${cert.color}-500 text-xl">
                        <i class="${cert.icon}"></i>
                    </div>
                    <div class="flex-1">
                        <h3 class="font-semibold text-gray-800">${cert.name}</h3>
                        <p class="text-gray-600 text-sm">${cert.description}</p>
                    </div>
                    <button onclick="deleteCertification(${index})" class="text-red-500 hover:text-red-700 transition-colors">
                        <i class="fas fa-trash text-sm"></i>
                    </button>
                </div>
            `).join('');
        }

        function renderProjects() {
            const container = document.getElementById('projectsContainer');
            if (!container) return;
            
            container.innerHTML = projectsData.map((project, index) => `
                <div class="p-4 bg-gray-50 rounded-lg">
                    <div class="flex items-start justify-between mb-2">
                        <div class="flex-1">
                            <h3 class="font-semibold text-gray-800">${project.name}</h3>
                            <p class="text-gray-600 text-sm mb-2">${project.description}</p>
                            <div class="flex items-center space-x-2 mb-2">
                                <span class="text-xs px-2 py-1 bg-blue-100 text-blue-800 rounded-full">${project.status}</span>
                                ${project.current ? '<span class="text-xs px-2 py-1 bg-green-100 text-green-800 rounded-full">Current</span>' : ''}
                            </div>
                            <div class="w-full bg-gray-200 rounded-full h-2">
                                <div class="bg-blue-500 h-2 rounded-full transition-all duration-300" style="width: ${project.progress}%"></div>
                            </div>
                            <span class="text-xs text-gray-600">${project.progress}% Complete</span>
                        </div>
                        <button onclick="deleteProject(${index})" class="text-red-500 hover:text-red-700 transition-colors ml-2">
                            <i class="fas fa-trash text-sm"></i>
                        </button>
                    </div>
                </div>
            `).join('');
        }

        function initializeChart() {
            const ctx = document.getElementById('skillsChart').getContext('2d');
            new Chart(ctx, {
                type: 'radar',
                data: {
                    labels: skillsData.map(skill => skill.name),
                    datasets: [{
                        label: 'Skills Level',
                        data: skillsData.map(skill => skill.level),
                        backgroundColor: 'rgba(59, 130, 246, 0.2)',
                        borderColor: 'rgba(59, 130, 246, 1)',
                        borderWidth: 2,
                        pointBackgroundColor: 'rgba(59, 130, 246, 1)',
                        pointBorderColor: '#fff',
                        pointHoverBackgroundColor: '#fff',
                        pointHoverBorderColor: 'rgba(59, 130, 246, 1)'
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        r: {
                            beginAtZero: true,
                            max: 100,
                            ticks: {
                                stepSize: 20
                            }
                        }
                    },
                    plugins: {
                        legend: {
                            position: 'top',
                        }
                    }
                }
            });
        }

        function updateChart() {
            const chart = Chart.getChart('skillsChart');
            if (chart) {
                chart.data.labels = skillsData.map(skill => skill.name);
                chart.data.datasets[0].data = skillsData.map(skill => skill.level);
                chart.update();
            }
        }

        function resetSkillForm() {
            const skillName = document.getElementById('skillName');
            const skillLevel = document.getElementById('skillLevel');
            const skillLevelDisplay = document.getElementById('skillLevelDisplay');
            
            if (skillName) skillName.value = '';
            if (skillLevel) skillLevel.value = 50;
            if (skillLevelDisplay) skillLevelDisplay.textContent = '50%';
            
            document.querySelectorAll('.color-option').forEach(btn => btn.classList.remove('border-gray-800'));
            const defaultColor = document.querySelector('.color-option[data-color="bg-blue-500"]');
            if (defaultColor) defaultColor.classList.add('border-gray-800');
            selectedColor = 'bg-blue-500';
        }

        function resetTimelineForm() {
            const fields = ['timelinePosition', 'timelineCompany', 'timelineStartDate', 'timelineEndDate', 'timelineDescription'];
            fields.forEach(field => {
                const element = document.getElementById(field);
                if (element) element.value = '';
            });
            
            const currentCheckbox = document.getElementById('timelineCurrent');
            if (currentCheckbox) currentCheckbox.checked = false;
        }

        function resetCertificationForm() {
            const certName = document.getElementById('certificationName');
            const certDesc = document.getElementById('certificationDescription');
            
            if (certName) certName.value = '';
            if (certDesc) certDesc.value = '';
            
            document.querySelectorAll('.icon-option').forEach(btn => btn.classList.remove('border-gray-800'));
            const defaultIcon = document.querySelector('.icon-option[data-icon="fas fa-certificate"]');
            if (defaultIcon) defaultIcon.classList.add('border-gray-800');
            selectedIcon = 'fas fa-certificate';
            selectedIconColor = 'blue';
        }

        function resetProjectForm() {
            const fields = ['projectName', 'projectDescription'];
            fields.forEach(field => {
                const element = document.getElementById(field);
                if (element) element.value = '';
            });
            
            const progress = document.getElementById('projectProgress');
            const progressDisplay = document.getElementById('projectProgressDisplay');
            const status = document.getElementById('projectStatus');
            const current = document.getElementById('projectCurrent');
            
            if (progress) progress.value = 0;
            if (progressDisplay) progressDisplay.textContent = '0%';
            if (status) status.value = 'In Progress';
            if (current) current.checked = true;
        }

        function deleteSkill(index) {
            if (confirm('Are you sure you want to delete this skill?')) {
                skillsData.splice(index, 1);
                renderSkills();
                updateChart();
                saveToLocalStorage(); // Save to localStorage
            }
        }

        function deleteTimelineEntry(index) {
            if (confirm('Are you sure you want to delete this timeline entry?')) {
                timelineData.splice(index, 1);
                renderTimeline();
                saveToLocalStorage(); // Save to localStorage
            }
        }

        function deleteCertification(index) {
            if (confirm('Are you sure you want to delete this certification?')) {
                certificationsData.splice(index, 1);
                renderCertifications();
                saveToLocalStorage(); // Save to localStorage
            }
        }

        function deleteProject(index) {
            if (confirm('Are you sure you want to delete this project?')) {
                projectsData.splice(index, 1);
                renderProjects();
                saveToLocalStorage(); // Save to localStorage
            }
        }

        function showNotification(message, type = 'info') {
            const notification = document.createElement('div');
            notification.textContent = message;
            notification.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                background: ${type === 'success' ? '#10b981' : type === 'error' ? '#ef4444' : '#3b82f6'};
                color: white;
                padding: 12px 20px;
                border-radius: 8px;
                z-index: 10000;
                font-weight: 500;
                box-shadow: 0 4px 12px rgba(0,0,0,0.15);
                animation: slideInRight 0.3s ease-out;
            `;
            document.body.appendChild(notification);
            setTimeout(() => notification.remove(), 3000);
        }

        document.addEventListener('click', function(e) {
            const modals = ['editModal', 'addSkillModal', 'addTimelineModal', 'addCertificationModal', 'addProjectModal'];
            modals.forEach(modalId => {
                const modal = document.getElementById(modalId);
                if (modal && e.target === modal) {
                    modal.classList.add('hidden');
                }
            });
        });
          const profileImage = document.getElementById('profileImage');
  const editButton = document.getElementById('editButton');
  const imageUpload = document.getElementById('imageUpload');
  const saveButton = document.getElementById('saveButton');

  // When camera button is clicked, trigger file input click
  editButton.addEventListener('click', () => {
    imageUpload.click();
  });

  // When a file is selected, show preview and show save button
  imageUpload.addEventListener('change', () => {
    const file = imageUpload.files[0];
    if (file) {
      const imageUrl = URL.createObjectURL(file);
      profileImage.src = imageUrl;
      saveButton.style.display = 'inline-block';

      // Optional: revoke the object URL after image loads to free memory
      profileImage.onload = () => URL.revokeObjectURL(imageUrl);
    }
  });

  // Save button click handler - save image to localStorage
  saveButton.addEventListener('click', () => {
    const file = imageUpload.files[0];
    if (file) {
      const reader = new FileReader();
      reader.onload = function(e) {
        const imageData = e.target.result;
        // Save image data to localStorage
        localStorage.setItem('employeeProfileImage', imageData);
        saveButton.style.display = 'none';
        showNotification('Profile picture saved successfully!', 'success');
      };
      reader.readAsDataURL(file);
    }
  });

    </script>
</body>
</html>
